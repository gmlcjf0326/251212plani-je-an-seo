<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹œë‚˜ë¦¬ì˜¤ ë¹Œë” ê´€ë¦¬ì</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/niceplugin/KoPubWorld/css/KoPubWorld.css">
    <style>
        * {
            font-family: 'KoPubWorldDotum', sans-serif;
        }

        .flow-canvas {
            background-image:
                linear-gradient(rgba(245, 158, 11, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(245, 158, 11, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            background-color: #fffbf5;
        }

        .flow-node {
            position: absolute;
            border: 2px solid #f59e0b;
            background: white;
            border-radius: 12px;
            padding: 16px;
            min-width: 140px;
            cursor: move;
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.2);
            transition: all 0.2s;
        }

        .flow-node:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.3);
            z-index: 10;
        }

        .flow-node.start {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border-color: #059669;
        }

        .flow-node.branch {
            background: linear-gradient(135deg, #f59e0b, #ea580c);
            color: white;
            border-color: #ea580c;
        }

        .flow-node.selected {
            border-color: #dc2626;
            border-width: 3px;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.2);
        }

        .flow-line {
            position: absolute;
            height: 2px;
            background: #f59e0b;
            transform-origin: left center;
            pointer-events: none;
            z-index: 0;
        }

        .flow-line::after {
            content: '';
            position: absolute;
            right: -6px;
            top: -4px;
            width: 0;
            height: 0;
            border-left: 10px solid #f59e0b;
            border-top: 5px solid transparent;
            border-bottom: 5px solid transparent;
        }

        .tab-button {
            position: relative;
            transition: all 0.2s;
        }

        .tab-button.active {
            color: #ea580c;
            font-weight: bold;
        }

        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(to right, #f59e0b, #ea580c);
            border-radius: 3px 3px 0 0;
        }

        .priority-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f59e0b, #ea580c);
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .test-result {
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 12px;
            border-radius: 8px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            overflow-x: auto;
        }

        .keyword {
            color: #569cd6;
        }

        .string {
            color: #ce9178;
        }

        .operator {
            color: #d4d4d4;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-orange-50 via-amber-50 to-white h-screen overflow-hidden">
    <div class="flex flex-col h-screen">
        <!-- Header -->
        <header class="bg-gradient-to-r from-amber-500 to-orange-600 text-white shadow-lg">
            <div class="px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="text-3xl">ğŸ”¶</div>
                        <div>
                            <h1 class="text-xl font-bold">ì‹œë‚˜ë¦¬ì˜¤ ë¹Œë” ê´€ë¦¬ì</h1>
                            <p class="text-sm text-amber-100">ëŒ€í™” ì„¤ê³„ íŠ¹í™” í”Œë«í¼</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-all backdrop-blur-sm">
                            <span class="mr-2">ğŸ’¾</span>ì „ì²´ ì €ì¥
                        </button>
                        <button class="px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-all backdrop-blur-sm">
                            <span class="mr-2">â–¶</span>ì „ì²´ í…ŒìŠ¤íŠ¸
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="bg-white border-b-2 border-orange-200 shadow-sm">
            <div class="px-6">
                <div class="flex space-x-1">
                    <button class="tab-button active px-6 py-3 hover:bg-orange-50 transition-all">
                        ğŸ“‹ ì‹œë‚˜ë¦¬ì˜¤ ëª©ë¡
                    </button>
                    <button class="tab-button px-6 py-3 hover:bg-orange-50 transition-all">
                        ğŸ”€ í”Œë¡œìš° ë¹Œë”
                    </button>
                    <button class="tab-button px-6 py-3 hover:bg-orange-50 transition-all">
                        ğŸ¯ ë¶„ê¸° ì„¤ì •
                    </button>
                    <button class="tab-button px-6 py-3 hover:bg-orange-50 transition-all">
                        ğŸ§ª í…ŒìŠ¤íŠ¸
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 overflow-hidden flex">
            <!-- Left Panel: Flow Builder Canvas -->
            <div class="flex-1 overflow-hidden flex flex-col border-r-2 border-orange-200">
                <!-- Toolbar -->
                <div class="bg-white border-b border-orange-200 px-6 py-3">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-3">
                            <label class="text-sm font-medium text-gray-700">ì‹œë‚˜ë¦¬ì˜¤ ì„ íƒ:</label>
                            <select class="px-4 py-2 border-2 border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500">
                                <option>SCN-001: ì§€ì›ì‚¬ì—… ì•ˆë‚´</option>
                                <option>SCN-002: ì…ì£¼ë¬¸ì˜</option>
                                <option>SCN-003: ì‹œì„¤ì´ìš©</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-all text-sm">
                                â• ë…¸ë“œ ì¶”ê°€
                            </button>
                            <button class="px-3 py-2 bg-amber-500 text-white rounded-lg hover:bg-amber-600 transition-all text-sm">
                                ğŸ”— ì—°ê²°ì„ 
                            </button>
                            <button class="px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all text-sm">
                                â†º ë˜ëŒë¦¬ê¸°
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Canvas -->
                <div class="flex-1 overflow-auto flow-canvas relative">
                    <!-- Flow Lines -->
                    <div class="flow-line" style="top: 100px; left: 190px; width: 80px;"></div>
                    <div class="flow-line" style="top: 220px; left: 190px; width: 80px;"></div>
                    <div class="flow-line" style="top: 340px; left: 190px; width: 80px;"></div>

                    <!-- Branch Lines -->
                    <div class="flow-line" style="top: 340px; left: 450px; width: 100px; transform: rotate(-15deg);"></div>
                    <div class="flow-line" style="top: 340px; left: 450px; width: 100px;"></div>
                    <div class="flow-line" style="top: 340px; left: 450px; width: 100px; transform: rotate(15deg);"></div>

                    <!-- START Node -->
                    <div class="flow-node start" style="top: 80px; left: 50px;">
                        <div class="text-center">
                            <div class="text-2xl mb-1">ğŸš€</div>
                            <div class="font-bold text-sm">START</div>
                            <div class="text-xs opacity-80 mt-1">ì‹œì‘ì </div>
                        </div>
                    </div>

                    <!-- Node 1: ì¸ì‚¬ë§ -->
                    <div class="flow-node" style="top: 200px; left: 50px;">
                        <div class="text-center">
                            <div class="text-2xl mb-1">ğŸ‘‹</div>
                            <div class="font-bold text-sm text-gray-800">NODE-001</div>
                            <div class="text-xs text-gray-600 mt-1">ì¸ì‚¬ë§</div>
                        </div>
                    </div>

                    <!-- Node 2: ì˜ë„ë¶„ë¥˜ -->
                    <div class="flow-node" style="top: 320px; left: 50px;">
                        <div class="text-center">
                            <div class="text-2xl mb-1">ğŸ¤”</div>
                            <div class="font-bold text-sm text-gray-800">NODE-002</div>
                            <div class="text-xs text-gray-600 mt-1">ì˜ë„ë¶„ë¥˜</div>
                        </div>
                    </div>

                    <!-- Node 3: ë¶„ê¸°ì¡°ê±´ (Selected) -->
                    <div class="flow-node branch selected" style="top: 320px; left: 280px;">
                        <div class="text-center">
                            <div class="text-2xl mb-1">ğŸ¯</div>
                            <div class="font-bold text-sm">NODE-003</div>
                            <div class="text-xs opacity-90 mt-1">ë¶„ê¸°ì¡°ê±´</div>
                            <div class="mt-2 flex justify-center">
                                <div class="priority-badge">1</div>
                            </div>
                        </div>
                    </div>

                    <!-- Branch A: ì°½ì—…ì§€ì› -->
                    <div class="flow-node" style="top: 220px; left: 560px;">
                        <div>
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-xl">ğŸŒ±</span>
                                <span class="text-xs bg-green-100 text-green-700 px-2 py-1 rounded">A</span>
                            </div>
                            <div class="font-bold text-sm text-gray-800">ì°½ì—…ì§€ì›</div>
                            <div class="text-xs text-gray-600 mt-1">ìŠ¤íƒ€íŠ¸ì—… ëŒ€ìƒ</div>
                        </div>
                    </div>

                    <!-- Branch B: R&Dì§€ì› -->
                    <div class="flow-node" style="top: 320px; left: 560px;">
                        <div>
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-xl">ğŸ”¬</span>
                                <span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded">B</span>
                            </div>
                            <div class="font-bold text-sm text-gray-800">R&Dì§€ì›</div>
                            <div class="text-xs text-gray-600 mt-1">ì—°êµ¬ê°œë°œ ëŒ€ìƒ</div>
                        </div>
                    </div>

                    <!-- Branch C: í•´ì™¸ì§„ì¶œ -->
                    <div class="flow-node" style="top: 420px; left: 560px;">
                        <div>
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-xl">ğŸŒ</span>
                                <span class="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded">C</span>
                            </div>
                            <div class="font-bold text-sm text-gray-800">í•´ì™¸ì§„ì¶œ</div>
                            <div class="text-xs text-gray-600 mt-1">ê¸€ë¡œë²Œ ëŒ€ìƒ</div>
                        </div>
                    </div>

                    <!-- Legend -->
                    <div class="absolute bottom-6 left-6 bg-white/90 backdrop-blur-sm border-2 border-amber-300 rounded-xl p-4 shadow-lg">
                        <div class="font-bold text-sm text-gray-800 mb-3">ë²”ë¡€</div>
                        <div class="space-y-2 text-xs">
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 rounded bg-gradient-to-br from-green-500 to-green-600"></div>
                                <span>ì‹œì‘ ë…¸ë“œ</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 rounded bg-white border-2 border-amber-500"></div>
                                <span>ì¼ë°˜ ë…¸ë“œ</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-4 h-4 rounded bg-gradient-to-br from-amber-500 to-orange-600"></div>
                                <span>ë¶„ê¸° ë…¸ë“œ</span>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="w-12 h-0.5 bg-amber-500"></div>
                                <span>ì—°ê²°ì„ </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Node Properties & Test -->
            <div class="w-96 bg-white overflow-y-auto">
                <div class="p-6 space-y-6">
                    <!-- Node Properties -->
                    <div class="border-2 border-amber-300 rounded-xl p-4 bg-gradient-to-br from-amber-50 to-orange-50">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="font-bold text-gray-800 flex items-center">
                                <span class="mr-2">âš™</span>ë…¸ë“œ ì†ì„±
                            </h3>
                            <span class="px-2 py-1 bg-orange-600 text-white text-xs rounded-full">ì„ íƒë¨</span>
                        </div>

                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ë…¸ë“œ ID</label>
                                <input type="text" value="NODE-003" readonly class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-600 text-sm">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">ë…¸ë“œ ìœ í˜•</label>
                                <select class="w-full px-3 py-2 border-2 border-amber-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-amber-500 text-sm">
                                    <option>ë¶„ê¸°ì¡°ê±´</option>
                                    <option>ì¼ë°˜ ì‘ë‹µ</option>
                                    <option>API í˜¸ì¶œ</option>
                                    <option>ë°ì´í„° ìˆ˜ì§‘</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ë¶„ê¸° ì¡°ê±´</label>
                                <div class="code-block text-xs">
                                    <div><span class="keyword">intent</span> <span class="operator">==</span> <span class="string">"ì§€ì›ì‚¬ì—…"</span></div>
                                    <div class="mt-1"><span class="keyword">AND</span></div>
                                    <div class="mt-1"><span class="keyword">entity.type</span> <span class="operator">==</span> <span class="string">"ìŠ¤íƒ€íŠ¸ì—…"</span></div>
                                </div>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">ìš°ì„ ìˆœìœ„</label>
                                <div class="flex items-center space-x-2">
                                    <div class="priority-badge">1</div>
                                    <input type="range" min="1" max="10" value="1" class="flex-1">
                                    <button class="px-2 py-1 bg-amber-100 text-amber-700 rounded hover:bg-amber-200 text-sm">â–²</button>
                                    <button class="px-2 py-1 bg-amber-100 text-amber-700 rounded hover:bg-amber-200 text-sm">â–¼</button>
                                </div>
                            </div>

                            <div class="flex space-x-2">
                                <button class="flex-1 px-4 py-2 bg-gradient-to-r from-amber-500 to-orange-600 text-white rounded-lg hover:from-amber-600 hover:to-orange-700 transition-all font-medium text-sm">
                                    ğŸ’¾ ì €ì¥
                                </button>
                                <button class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all text-sm">
                                    ğŸ—‘ ì‚­ì œ
                                </button>
                                <button class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-all text-sm">
                                    ğŸ“‹ ë³µì œ
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Test Simulation -->
                    <div class="border-2 border-green-300 rounded-xl p-4 bg-gradient-to-br from-green-50 to-emerald-50">
                        <h3 class="font-bold text-gray-800 mb-4 flex items-center">
                            <span class="mr-2">ğŸ§ª</span>í…ŒìŠ¤íŠ¸ ì‹œë®¬ë ˆì´ì…˜
                        </h3>

                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">í…ŒìŠ¤íŠ¸ ë°œí™”</label>
                                <input type="text" value="ìŠ¤íƒ€íŠ¸ì—… ì§€ì›ì‚¬ì—… ì•Œë ¤ì¤˜" class="w-full px-3 py-2 border-2 border-green-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm">
                            </div>

                            <button class="w-full px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-lg hover:from-green-600 hover:to-emerald-700 transition-all font-medium text-sm">
                                â–¶ ì‹¤í–‰
                            </button>

                            <!-- Test Result -->
                            <div class="test-result bg-white border-2 border-green-400 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-bold text-sm text-gray-800">ì‹¤í–‰ ê²°ê³¼</span>
                                    <span class="text-2xl">âœ…</span>
                                </div>
                                <div class="space-y-2 text-xs">
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">ë„ë‹¬ ë…¸ë“œ:</span>
                                        <span class="font-bold text-green-700">ë…¸ë“œ A (ì°½ì—…ì§€ì›)</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">ë§¤ì¹­ ì¡°ê±´:</span>
                                        <span class="font-bold text-green-700">100%</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">ì‹¤í–‰ ì‹œê°„:</span>
                                        <span class="font-bold text-green-700">0.24ì´ˆ</span>
                                    </div>
                                </div>
                                <div class="mt-3 pt-3 border-t border-green-200">
                                    <div class="text-xs text-gray-600 mb-1">ê²½ë¡œ ì¶”ì :</div>
                                    <div class="flex items-center space-x-1 text-xs">
                                        <span class="px-2 py-1 bg-green-100 text-green-700 rounded">START</span>
                                        <span>â†’</span>
                                        <span class="px-2 py-1 bg-green-100 text-green-700 rounded">NODE-001</span>
                                        <span>â†’</span>
                                        <span class="px-2 py-1 bg-green-100 text-green-700 rounded">NODE-002</span>
                                        <span>â†’</span>
                                        <span class="px-2 py-1 bg-green-500 text-white rounded">NODE-003</span>
                                        <span>â†’</span>
                                        <span class="px-2 py-1 bg-green-600 text-white rounded font-bold">A</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Features List -->
                    <div class="bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-xl p-4">
                        <h3 class="font-bold text-gray-800 mb-3 flex items-center">
                            <span class="mr-2">ğŸ“‹</span>êµ¬í˜„ ê¸°ëŠ¥
                        </h3>
                        <div class="space-y-2 text-xs">
                            <div class="flex items-start space-x-2">
                                <span class="text-green-600 font-bold">âœ“</span>
                                <div>
                                    <div class="font-medium text-gray-800">SFR-005: ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ ëŒ€í™”</div>
                                    <div class="text-gray-600">ë¶„ê¸°ì¡°ê±´, ìš°ì„ ìˆœìœ„, ë…¼ë¦¬ì—°ì‚°ì</div>
                                </div>
                            </div>
                            <div class="flex items-start space-x-2">
                                <span class="text-green-600 font-bold">âœ“</span>
                                <div>
                                    <div class="font-medium text-gray-800">SFR-007: ì‹œë‚˜ë¦¬ì˜¤ ê´€ë¦¬</div>
                                    <div class="text-gray-600">ë“±ë¡/ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ, í…ŒìŠ¤íŠ¸</div>
                                </div>
                            </div>
                            <div class="flex items-start space-x-2">
                                <span class="text-green-600 font-bold">âœ“</span>
                                <div>
                                    <div class="font-medium text-gray-800">SFR-009: ì‹œë®¬ë ˆì´ì…˜</div>
                                    <div class="text-gray-600">ë°œí™” í…ŒìŠ¤íŠ¸, ê²½ë¡œ ì¶”ì </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Scenario Stats -->
                    <div class="bg-gradient-to-br from-amber-50 to-orange-50 border-2 border-amber-300 rounded-xl p-4">
                        <h3 class="font-bold text-gray-800 mb-3 flex items-center">
                            <span class="mr-2">ğŸ“Š</span>ì‹œë‚˜ë¦¬ì˜¤ í†µê³„
                        </h3>
                        <div class="grid grid-cols-2 gap-3 text-center">
                            <div class="bg-white rounded-lg p-3">
                                <div class="text-2xl font-bold text-amber-600">6</div>
                                <div class="text-xs text-gray-600 mt-1">ì „ì²´ ë…¸ë“œ</div>
                            </div>
                            <div class="bg-white rounded-lg p-3">
                                <div class="text-2xl font-bold text-orange-600">3</div>
                                <div class="text-xs text-gray-600 mt-1">ë¶„ê¸°ì </div>
                            </div>
                            <div class="bg-white rounded-lg p-3">
                                <div class="text-2xl font-bold text-green-600">8</div>
                                <div class="text-xs text-gray-600 mt-1">ì—°ê²°ì„ </div>
                            </div>
                            <div class="bg-white rounded-lg p-3">
                                <div class="text-2xl font-bold text-blue-600">4</div>
                                <div class="text-xs text-gray-600 mt-1">í‰ê·  ê¹Šì´</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="bg-white border-t-2 border-orange-200 shadow-inner">
            <div class="px-6 py-3">
                <div class="flex items-center justify-between text-xs text-gray-500">
                    <div class="flex items-center space-x-4">
                        <span>âœ… SFR-005: ë¶„ê¸°ì¡°ê±´ ì„¤ì •</span>
                        <span>âœ… SFR-007: ì‹œë‚˜ë¦¬ì˜¤ ê´€ë¦¬</span>
                        <span>âœ… SFR-009: ì‹œë®¬ë ˆì´ì…˜ í…ŒìŠ¤íŠ¸</span>
                    </div>
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                        <span>ì €ì¥ë¨</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        const tabs = document.querySelectorAll('.tab-button');
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                tabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Node selection
        const nodes = document.querySelectorAll('.flow-node');
        nodes.forEach(node => {
            node.addEventListener('click', function() {
                nodes.forEach(n => n.classList.remove('selected'));
                if (!this.classList.contains('start')) {
                    this.classList.add('selected');
                }
            });
        });

        // Node dragging (basic implementation)
        let isDragging = false;
        let currentNode = null;
        let offsetX, offsetY;

        nodes.forEach(node => {
            node.addEventListener('mousedown', function(e) {
                if (e.target.closest('button')) return;
                isDragging = true;
                currentNode = this;
                const rect = this.getBoundingClientRect();
                offsetX = e.clientX - rect.left;
                offsetY = e.clientY - rect.top;
                this.style.cursor = 'grabbing';
            });
        });

        document.addEventListener('mousemove', function(e) {
            if (isDragging && currentNode) {
                const canvas = document.querySelector('.flow-canvas');
                const canvasRect = canvas.getBoundingClientRect();
                const x = e.clientX - canvasRect.left - offsetX;
                const y = e.clientY - canvasRect.top - offsetY + canvas.scrollTop;

                currentNode.style.left = Math.max(0, x) + 'px';
                currentNode.style.top = Math.max(0, y) + 'px';
            }
        });

        document.addEventListener('mouseup', function() {
            if (currentNode) {
                currentNode.style.cursor = 'move';
            }
            isDragging = false;
            currentNode = null;
        });

        // Priority controls
        document.querySelectorAll('input[type="range"]').forEach(range => {
            range.addEventListener('input', function() {
                const badge = this.parentElement.querySelector('.priority-badge');
                badge.textContent = this.value;
            });
        });

        // Test execution animation
        const testButton = document.querySelector('button:has-text("â–¶ ì‹¤í–‰")');
        if (testButton) {
            testButton.addEventListener('click', function() {
                const result = document.querySelector('.test-result');
                result.style.animation = 'none';
                setTimeout(() => {
                    result.style.animation = 'slideIn 0.3s ease-out';
                }, 10);
            });
        }
    </script>
</body>
</html>
